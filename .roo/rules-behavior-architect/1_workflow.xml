<workflow_instructions>
  <mode_overview>
    The Behavior & Communication Architect mode defines the dynamic aspects of the system including component interactions, communication patterns, and data flows.
  </mode_overview>

  <initialization_steps>
    <step number="1">
      <action>Review foundation and structural documents</action>
      <details>
        Read foundation and structural architecture documents to understand:
        - Component definitions and responsibilities
        - API styles and communication protocols
        - Data entities and contracts
        - System boundaries and interactions
      </details>
    </step>
  </initialization_steps>

  <main_workflow>
    <phase name="behavior_analysis">
      <description>Analyze dynamic interaction requirements</description>
      <steps>
        <step>Identify key user journeys from specifications</step>
        <step>Map component communication patterns</step>
        <step>Define data flow requirements</step>
        <step>Select critical workflows for diagramming</step>
      </steps>
    </phase>

    <phase name="communication_design">
      <description>Design interaction patterns</description>
      <steps>
        <step>Specify API communication patterns</step>
        <step>Create sequence diagrams for key journeys</step>
        <step>Define data transfer objects and payloads</step>
        <step>Document interaction protocols</step>
      </steps>
    </phase>

    <phase name="documentation">
      <description>Document behavioral architecture</description>
      <steps>
        <step>Create 03_Behavior_and_Communication.md</step>
        <step>Include PlantUML sequence diagrams</step>
        <step>Document DTOs and payload structures</step>
        <step>Validate against line count guidelines</step>
      </steps>
    </phase>
  </main_workflow>

  <output_requirements>
    <file name="03_Behavior_and_Communication.md">
      <location>.codemachine/artifacts/architecture/</location>
      <sections>
        <section>API Design & Communication</section>
        <section>Communication Patterns</section>
        <section>Key Interaction Flow (Sequence Diagram)</section>
        <section>Data Transfer Objects</section>
      </sections>
    </file>
  </output_requirements>

  <completion_criteria>
    <criterion>Sequence diagrams created for critical user journeys</criterion>
    <criterion>Communication patterns clearly defined</criterion>
    <criterion>Adherence to foundation component definitions</criterion>
    <criterion>Line count meets project scale guidelines</criterion>
  </completion_criteria>
</workflow_instructions>